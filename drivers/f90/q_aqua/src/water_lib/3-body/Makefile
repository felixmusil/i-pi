FC = gfortran
FFLAGS = -O -fdefault-real-8 -fdefault-double-8 -ffree-line-length-0 -J./mod3b

#FFLAGS = -O -openmp -parallel  -u -module ./mod3b_omp
#FFLAGS = -mcmodel=medium -shared-intel -O -u -module ./mod3b_bigm
#FC = pgf90
#FFLAGS = -O -mp -mcmodel=medium -module ./mod_3bpgi_omp 
#FFLAGS = -O  -module ./mod_3bpgi

BLD = /usr/bin/ar -rcv

# Set objlibinv to the list of object files to be included in libinv.a.
objlib = inv_wp_t.o \
bg63_prims.o \
cg3_prims.o \
cg6_prims.o \
inv_mgx_t.o \
inv_mg63_t.o\
inv_cxx_t.o \
inv_cx63_t.o\
inv_t.o\
pes0_t.o \
pes_x6y3_t.o\
pes1c_t.o\
pes_t.o

#-----------------------------------------------------------------------
# Rules.

lib : libpes3b.a 

.PHONY : lib clean realclean
.SUFFIXES : $(nil)
.SUFFIXES : .f90 .o .exe
FORCE :

# Autogenerated dependency file
include .depend

# Pattern rule to make %.o file
.f90.o :
	$(FC) -c $(FFLAGS) $<

# Here are the rules to make the libraries.
libpes3b.a : $(objlib)
	\rm -f $@
	$(BLD) $(@F) $(objlib)


# Targets 'clean' and 'realclean' clean up the directory.
clean : FORCE
	rm -f *.o *~ core junk
realclean : clean
	rm -f *.a *.mod *.exe

